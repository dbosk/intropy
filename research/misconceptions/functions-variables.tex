\subsection{Functions and variables}

Functions and variables is often the first area which is taught in introductory programming, an area which holds many misconceptions and difficulties. According to \textcite{Kohn2017VariableEvaluation,Plass2015Variables,Doukakis2007}, 
sometimes students believe that variables can hold an entire algorithm and 
therefore see a variable as a function (or a mathematical equation). This will 
create problems when a student creates a variable in belief that the variable 
will dynamically change its value when the equation would change its value, or be updated
when the variable is used in the program. Another misconception that goes hand in hand with the assumption that a 
variable holds an equation and not a single value, is that if in the return 
statement the student returns an equation, the student believes that the return 
value will be that equation, not the value that the equation represents 
\parencite{Kohn2017VariableEvaluation}.
This misconception can be 
connected to how variable definitions are used in mathematics. 

From a variation theoretic perspective, we can say several things about this:
\begin{enumerate}
  \item That variables and functions are interconnected and should be treated 
    simultaneously (not \enquote{one thing at a time}), to be able to contrast 
    them \parencite[\cf][Ch~6, pp~167--168]{NCOL}.
  \item Unlike in mathematics, every line in a piece of program (in an 
    imperative language) constitutes a new state of the program.
    We must teach this to students through a series of patterns, as dictated by 
    variation theory.
\end{enumerate}

XXX propose a pattern for this example.

There is also a misconception that variables can hold more than one value at 
the time \parencite{Doukakis2007}.
This misconception can relate to several things:
\begin{enumerate*}
  \item the type system, confusing lists with non-container types, not seeing a 
    list as a type itself;
  \item the scope of variables, that the same variable identifier can be used 
    for different things in different scopes.
\end{enumerate*}

XXX Possible ways to attack this using variation theory \dots

But it is not only the right side of the variable definition that students can 
have misconceptions about. The name of the variable has been misunderstood as 
having power of the value which it holds 
\parencite{MisconceptionsSurvey2017,Sleeman1984}. For example, if a student 
names one variable \emph{max} and another variable \emph{min}, the student 
might think that the variables will strictly only hold the maximum value and 
the minimum value throughout the program, even though the code does not carry through this rule. 

We can both explain this phenomenon and propose a teaching design using 
variation theory.
Let's start with the explanation.
When teaching the students we always use proper (\ie relevant) variable names 
that relate to the purpose of the variable.
If we never show the students any examples where the variable name is not 
related to its purpose (bad variable names), they cannot separate the variable 
naming from its purpose.
This, inevitably, leads to the teaching design:
we must show the students that the variable names are independent of their 
purpose.
We do this by introducing \emph{contrast}.
We show a standard example, then we change a variable name from a relevant to 
an irrelevant one.
We show that the program still works.
We can then \emph{generalize} this by showing that we can rename the other 
variables too, and even show other examples where the variable names are 
disconnected from the purpose.
When done, we can point out that we name variables properly for readability 
(ease of comprehension), by \emph{contrasting} the same example with and 
without relevant variable names.
We can follow this by \emph{generalization}, by showing a previously unseen 
example with unrelated variable names and trying to read it.

If we move on to the relationship between variables and functions we can see 
more misconceptions that students have; from where input and output arguments 
come from and go to \parencite{Ragonis2005OOP}.
The first difficulty is how students treat return-values. When a function is 
supposed to return a value some students miss the return value, expecting the 
function to return it by default \parencite{Kurvinen2016,KumarVeerasamy2016}. Some students might also believe that a print-statement at the end of a 
function will act as a return statement \parencite{MisconceptionsSurvey2017}. 

XXX Add analysis for when students miss to capture the return value


A student might also write a function which returns a value, but that value is 
not stored nor being used later in the program 
\parencite{AltadmriBrown2015}. 

XXX Add analysis for students who returns values that are not being used. 


Furthermore, it has also been found that students have difficulties returning the right value or variable from a function 
\parencite{KumarVeerasamy2016}. 

XXX Add analysis for when students have trouble returning the right value and or variable. 



It is not only the return value that is difficult to grasp for students, the 
input arguments are also a difficult concept for some students. When calling a 
function it shows that the student have trouble using and understanding which 
arguments that are meant to be used in the function call 
\parencite{AltadmriBrown2015}. 

XXX Add analysis on how one can teach function arguments 

\Textcite{Fleury1991} researched the 
misconceptions students have when using parameters in functions.
She found that students had constructed their own rules for the using 
of global and local variables which are connected to the use of variables in 
functions. These are the misconceptions she found, 

\begin{enumerate}
    \item when changing a local variable in a function, the variables with the same name is changed for the whole program

    \item if the local variable is not an argument in the function-call, the program will go back to where the function was called and search for it there

    \item if a function references to a global variable that is not a function argument, it will create an error in the program

    \item if a global variable is changed in the function body, the new value will not be reachable for the rest of the program if not returned by the function
\end{enumerate}

XXX Add analysis on how one can teach the difference between local and global variables and how they are used in functions. 

The difference between variables in programming and variables in mathematics is something that some students do not grasp. If a student in a variable 
definition uses, on the right side of the equal symbol, a variable that is not 
defined, but the variable on the left side is already defined, they think that 
the computer will solve this as an equation \parencite{Plass2015Variables}. 
This assumption made by the students was also discovered by 
\textcite{Kohn2017VariableEvaluation} when giving the students the definition 
\verb'x = x + 1'. If you look at this definition with a mathematical 
perspective you will see an unsolvable equation, which is also what some of the 
students saw. They did not see that the \verb'x' to the left is the variable, 
and that the \verb'x' to the right only holds a value. This definition is  
easier to understand for a novice programmer, according to 
\textcite{Kohn2017VariableEvaluation}, when we instead write this definition as 
\verb'x += 1'. 

XXX Add analysis on how to help students understand the difference between variable definitions in programming and equations in mathematics

\textbf{Fun things to add:}

- "Capitalization: Some learners capitalize the first letter of variable/function names when they appear at the start of a line of code, because in English the first word in a sentence should always be capitalized. Those same names are not capitalized when used later, which causes errors since most programming languages are case-sensitive. They also sometimes mistakenly capitalized keywords such as For, While, If, again because it looks more natural in written English" \parencite{GuoMarkelZhang2020}

- "Pronoun references: Some learners used “pronouns” to refer to their variables with shorthand, which surprised us. For instance, in many small pieces of learner code, there is only one object that is created and being operated on, such as a list. After defining the list using a variable name, some learners simply referred to that list as list later in their code instead of using its name, which throws an error" \parencite{GuoMarkelZhang2020}

- "Verb placement: Function calls are like verbs, so some learners were confused by where to place them in a statement (akin to a “sentence” in code). For instance, some wrote parse(x)=input() since it reads left-to-right like “parse the string x that comes from user input” but the correct syntax is x=parse(input()) if parse returns a string." \parencite{GuoMarkelZhang2020}

- "Upon learning that == means equals in programming, some learners tried using x == y as an assignment statement instead of x=y, since they wanted to “make x equal to y.” This intuitively makes sense but has no side effect in code (it just returns a boolean). These errors are hard to track down since only later in execution when x is accessed will they realize that it does not have the updated value from y." \parencite{GuoMarkelZhang2020}

- "Similarly, some did not know that assignment statements go from right to left like c=a+b, so they wrote left-to-right assignments like a+b=c. The unhelpful error here is “can’t assign to operator.” Again, based on mathematical equality, order does not matter, but in programming it does matter." \parencite{GuoMarkelZhang2020}

- "Omitting * for multiplication: Instead of writing 3*x, they write 3x, which gives a syntax error since it looks like a variable name that starts with a digit. x3 does not work either since it also denotes a variable name. Also, in math a(b+c) and (a+b)c both mean multiplication, but in Python the former signifies a function call of a() and the latter is a syntax error. Note that Python may display vastly different error messages for the same misconception, and those errors give no indication of the learner’s underlying math confusion." \parencite{GuoMarkelZhang2020}

